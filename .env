# ==========================================
# ðŸš€ CRYPTO AI BOT - 15-MINUTE CONFIGURATION
# ==========================================
# Optimized for swing trading on 15-minute timeframe
# More reliable signals, less noise, bigger profit targets

# ==========================================
# ðŸŽ¯ TRADING MODE
# ==========================================
MODE=live
DRY_RUN=false
TESTNET=true
SAVE_REPORTS=true
LOG_LEVEL=INFO
# ==========================================
# ðŸ”‘ API CREDENTIALS (BINANCE)
# ==========================================
BINANCE_API_KEY=
BINANCE_API_SECRET=
# ==========================================
# ðŸ“Š TRADING PARAMETERS
# ==========================================
# Multi-symbol trading (10 major pairs)
SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT,SOLUSDT,ADAUSDT,XRPUSDT,DOGEUSDT,AVAXUSDT,LINKUSDT,MATICUSDT

# 15-minute timeframe for swing trading
TIMEFRAME=15m

# Backtest settings
BACKTEST_DAYS=90

# ==========================================
# ðŸ’° RISK MANAGEMENT (AGGRESSIVE FOR 15m)
# ==========================================
# Higher leverage for 15m timeframe (more stable than 1m)
LEVERAGE=10

# Risk per trade: 1% (doubled from 1m due to higher confidence)
RISK_PER_TRADE_PCT=3.0

# Max daily loss: 8% (more room for swing trades)
MAX_DAILY_LOSS_PCT=8.0

# Minimum order size
MIN_NOTIONAL_USDT=10.0

# Fees (Binance Futures)
TAKER_FEE=0.0004
MAKER_FEE=0.0002
SLIPPAGE_BPS=5

# ==========================================
# ðŸŽ¯ IMBA SIGNAL PARAMETERS (15m OPTIMIZED)
# ==========================================
# Minimum ADX for trend following (higher for 15m)
MIN_ADX=30.0

# Minimum confidence for trade entry (slightly lower - 15m more reliable)
BT_CONF_MIN=1.2

# Minimum BB Width (volatility filter)
BT_BBW_MIN=0.005

# Signal cooldown: 5 minutes (300s) - avoid overtrading on 15m
COOLDOWN_SEC=300

# Anti-flip cooldown: 3 minutes (180s)
ANTI_FLIP_SEC=180

# VWAP band percentage (wider for 15m)
VWAP_BAND_PCT=0.008

# EMA pinch quantile (for convergence detection)
EMA_PINCH_Q=0.12

# ==========================================
# ðŸ“ˆ REGIME DETECTION (15m THRESHOLDS)
# ==========================================
# Trend regime: ADX > 30 (stronger trends on 15m)
TREND_ADX_THRESHOLD=30.0

# Flat regime: ADX < 25
FLAT_ADX_THRESHOLD=25.0

# Trend BBW threshold (higher volatility on 15m)
TREND_BBW_THRESHOLD=0.015

# Flat BBW threshold
FLAT_BBW_THRESHOLD=0.008

# ==========================================
# ðŸ”„ DCA SETTINGS (AGGRESSIVE)
# ==========================================
# DCA ladder: entries at -1%, -2%, -3.5%
DCA_LADDER=-1.0:1.5,-2.0:2.0,-3.5:2.5

# Enable adaptive DCA
ADAPTIVE_DCA=true

# DCA trend ADX threshold
DCA_TREND_ADX=30.0

# Disable DCA in strong trends (let winners run)
DCA_DISABLE_ON_TREND=true

# Maximum DCA levels
MAX_LEVELS=5

# DCA position size multiplier
DCA_MULTIPLIER=1.5

# Spacing between DCA levels (%)
LEVEL_SPACING_PCT=2.0

# ==========================================
# ðŸ›¡ï¸ STOP LOSS & TAKE PROFIT (15m OPTIMIZED)
# ==========================================
# Fixed stop loss: 2% (wider for 15m swings)
SL_FIXED_PCT=2.0

# ATR-based stop loss multiplier
SL_ATR_MULT=2.0

# Take profit levels (R:R ratios)
TP_LEVELS=1.2,1.8,2.3

# TP shares (% of position to close at each level)
TP_SHARES=0.30,0.40,0.30

# Break-even trigger (move SL to entry after +1R)
BE_TRIGGER_R=1.0

# Trailing stop enabled
TRAIL_ENABLE=true

# Trailing stop ATR multiplier
TRAIL_ATR_MULT=1.5

# ==========================================
# ðŸŽ¯ EXIT ORDER MANAGEMENT
# ==========================================
PLACE_EXITS_ON_EXCHANGE=true
EXIT_WORKING_TYPE=MARK_PRICE
EXIT_REPLACE_EPS=0.005
EXIT_REPLACE_COOLDOWN=60
MIN_TP_NOTIONAL_USDT=10.0
EXITS_ENSURE_INTERVAL=30

# ==========================================
# ðŸ¤– ML MODELS (OPTIONAL)
# ==========================================
LSTM_ENABLE=true
LSTM_INPUT=20
SEQ_LEN=50
LSTM_SIGNAL_THRESHOLD=0.002

GPT_ENABLE=false
GPT_API_URL=http://127.0.0.1:1234
GPT_MODEL=openai/gpt-oss-20b
GPT_MAX_TOKENS=200
GPT_INTERVAL=30
GPT_TIMEOUT=20

# ==========================================
# ðŸ“¡ WEBSOCKET (ORDER BOOK)
# ==========================================
WS_ENABLE=true
WS_DEPTH_LEVEL=10
WS_DEPTH_INTERVAL=1000
OBI_ALPHA=0.65
OBI_THRESHOLD=0.20

# ==========================================
# ðŸ§  SELF-LEARNING SYSTEM (OPTIONAL)
# ==========================================
ENABLE_TRADE_JOURNAL=true
ENABLE_ADAPTIVE_OPTIMIZER=true
ENABLE_REALTIME_ADAPTATION=true
OPTIMIZATION_INTERVAL_HOURS=24
MIN_TRADES_FOR_OPTIMIZATION=10
PAUSE_ON_LOSS_STREAK=5

# ==========================================
# ðŸ’¾ DATA LOADING
# ==========================================
# Preload 500 candles on startup (7.5 days of 15m data)
PRELOAD_CANDLES=1200

# Signal cooldown: 5 minutes between signals per symbol
SIGNAL_COOLDOWN_SECONDS=300

# ==========================================
# ðŸŽ¨ IMBA FILTERS & MARKET INFLUENCE
# ==========================================
# Funding rate filter threshold
FUNDING_FILTER_THRESHOLD=0.15

# Liquidation notional threshold (5M USDT)
LIQUIDATION_NOTIONAL_THRESHOLD=5000000

# Volume ratio filter (min 60% of avg)
VOLUME_MIN_RATIO=0.6

# Volatility ratio filters
VOLATILITY_MIN_RATIO=0.4
VOLATILITY_MAX_RATIO=2.5

# Altcoin symbols for market bias
ALT_SYMBOLS=ETHUSDT,BNBUSDT,SOLUSDT,AVAXUSDT,LINKUSDT

# Altcoin influence weight
ALT_INFLUENCE=0.40

# ==========================================
# ðŸš€ IMBA RESEARCH SIGNALS
# ==========================================
# Enable IMBA signal aggregation (9 advanced signals)
USE_IMBA_SIGNALS=true

# ==========================================
# ðŸ“¢ NOTIFICATIONS (OPTIONAL)
# ==========================================
TG_BOT_TOKEN=
TG_CHAT_ID=

# ==========================================
# ðŸ“ FILE PATHS
# ==========================================
KL_PERSIST=data/klines_15m.csv
TRADES_PATH=data/trades_15m.csv
EQUITY_PATH=data/equity_15m.csv
RESULTS_PATH=data/results_15m.csv
STATE_PATH=data/state_15m.json

# ==========================================
# ðŸ“Š RECOMMENDED SETTINGS FOR 15-MINUTE
# ==========================================
# 
# âœ… PROS:
# - More reliable signals (less noise)
# - Better risk/reward ratios
# - Stronger trend confirmation
# - Less stress (4 signals/hour vs 30/hour)
# - Bigger profit targets (2-4% vs 0.5-1%)
# 
# âš¡ RECOMMENDED LEVERAGE:
# - Conservative: 5x-7x
# - Moderate: 8x-12x (CURRENT)
# - Aggressive: 15x-20x
# 
# ðŸŽ¯ EXPECTED PERFORMANCE:
# - Signals per day: 20-40
# - Win rate: 55-65%
# - Avg profit: +2.5%
# - Avg loss: -1.5%
# - R:R ratio: 1:1.6
# - Daily P&L: +3-8%
# 
# ==========================================

# CoinMarketCap API Key (optional)
# Get your FREE API key at: https://coinmarketcap.com/api/
# Free tier: 10,000 calls/month (333/day)
CMC_API_KEY=your-api-key-here

# Emergency Stop Loss (optional, default: 20.0)
# Automatically halts all trading if account equity drops by this percentage
# Example: 20.0 means bot stops if you lose 20% of initial equity
# Prevents catastrophic losses like the -300% incident
EMERGENCY_STOP_LOSS_PCT=20.0

# Leverage-Optimized Take Profit Configuration
# TP levels automatically scaled by leverage for realistic profit targets:
# 5x leverage: 2%, 4.5%, 8% price moves = 10%, 22.5%, 40% profits
# 10x leverage: 1.5%, 3.5%, 6% price moves = 15%, 35%, 60% profits
# Note: TP levels are calculated dynamically based on leverage in runner/live.py

# ==========================================
# ðŸš€ PHASE 1-4 IMPROVEMENTS (2025)
# ==========================================

# PHASE 2: GRU Model (MAPE 3.54% vs LSTM 5.2%)
# Ð’ÐºÐ»ÑŽÑ‡Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»Ð¸: python examples/gru_training_example.py
GRU_ENABLE=false
GRU_INPUT_FEATURES=12
GRU_SEQUENCE_LENGTH=60
GRU_UNITS=100
GRU_DROPOUT_RATE=0.2
GRU_LEARNING_RATE=0.01
GRU_MODEL_DIR=models/checkpoints

# GRU Training Parameters (Ð´Ð»Ñ examples/gru_training_example.py)
GRU_BATCH_SIZE=32
GRU_EPOCHS=20
GRU_VALIDATION_SPLIT=0.2
GRU_EARLY_STOPPING_PATIENCE=5

# PHASE 3: Adaptive Strategy & Regime Detection
# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹ ÐµÑÐ»Ð¸ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‚
REGIME_ADX_TREND_THRESHOLD=25.0
REGIME_ADX_FLAT_THRESHOLD=20.0
ADAPTIVE_POSITION_SIZE_MIN=0.5
ADAPTIVE_POSITION_SIZE_MAX=1.5

# PHASE 4: Kelly Criterion Position Sizing
# Fractional Kelly: 0.25 = Quarter Kelly (conservative), 0.5 = Half Kelly, 1.0 = Full Kelly (aggressive)
KELLY_FRACTIONAL=0.25
KELLY_LOOKBACK_TRADES=50
KELLY_MIN_TRADES=10
KELLY_LOOKBACK_DAYS=30

# PHASE 4: Dynamic Stop Loss
DYNAMIC_STOP_ATR_MULTIPLIER=2.0
DYNAMIC_STOP_MAX_PERCENT=5.0
DYNAMIC_STOP_TRAILING_ACTIVATION=2.5
DYNAMIC_STOP_BREAKEVEN_TRIGGER=1.5

# ==========================================
# ðŸ§  ML ADAPTIVE LEARNING SYSTEM
# ==========================================
# Ð’ÐÐ–ÐÐž: Ð¡Ð½Ð¸Ð¶Ð°ÐµÐ¼ Ð¿Ð¾Ñ€Ð¾Ð³ Ñ‡Ñ‚Ð¾Ð±Ñ‹ ML ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°Ð»Ð° ÑÐ´ÐµÐ»ÐºÐ¸ Ð¸ ÑƒÑ‡Ð¸Ð»Ð°ÑÑŒ!
ML_MIN_CONFIDENCE=1.2
ML_COLD_START_SAMPLES=50
ML_COLD_START_CONFIDENCE=1.4
ML_LEARNING_RATE=0.01
ML_ENABLE_EXPLORATION=true

# Note: Phase 1 (Concurrency Protection, Rate Limiting) Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹






