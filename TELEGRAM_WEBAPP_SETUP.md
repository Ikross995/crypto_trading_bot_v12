# üì± Telegram Web App Setup

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Dashboard –≤ Telegram

–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –ø—Ä—è–º–æ –≤ Telegram –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!

---

## üéØ –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:

- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏** - Equity curve, P&L, –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–π UI** - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –≤ —Å—Ç–∏–ª–µ Telegram
- ‚úÖ **Real-time –¥–∞–Ω–Ω—ã–µ** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- ‚úÖ **–ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ Telegram

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å Real-Time –¥–∞–Ω–Ω—ã–º–∏)

**–≠—Ç–æ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô —Å–ø–æ—Å–æ–±** - –æ–Ω –¥–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞!

### **–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ Flask –∏ flask-cors –¥–ª—è Web App —Å–µ—Ä–≤–µ—Ä–∞
pip install flask flask-cors
```

### **–®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç**

–¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –≤ —Ñ–∞–π–ª `data/dashboard_state.json`:

```bash
python cli.py live --timeframe 30m --testnet --use-combo --verbose --symbols BTCUSDT,ETHUSDT,SOLUSDT
```

üí° –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
```bash
TG_DASHBOARD_ENABLED=true
TG_DASHBOARD_INTERVAL=300  # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (300 —Å–µ–∫—É–Ω–¥)
```

### **–®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏ Web App —Å–µ—Ä–≤–µ—Ä**

–í **–æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ** (–∏–ª–∏ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ):

```bash
python webapp_server.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8080`

### **–®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ ngrok**

–°–∫–∞—á–∞–π ngrok: https://ngrok.com/download

–í **—Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**:

```bash
# –ó–∞–ø—É—Å—Ç–∏ ngrok –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ngrok http 8080
```

**–°–∫–æ–ø–∏—Ä—É–π HTTPS URL** –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç ngrok:
```
Forwarding   https://abc123.ngrok.io -> http://localhost:8080
```

–¢–≤–æ–π Web App URL: `https://abc123.ngrok.io/`

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** ngrok URL –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏!

### **–®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π –±–æ—Ç**

–î–æ–±–∞–≤—å –≤ `.env`:

```bash
TG_WEBAPP_URL=https://abc123.ngrok.io/
```

### **–®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç**

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞:

```bash
python cli.py live --timeframe 30m --testnet --use-combo --verbose --symbols BTCUSDT,ETHUSDT,SOLUSDT
```

### **–®–∞–≥ 7: –û—Ç–∫—Ä–æ–π Web App –≤ Telegram!**

1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/menu`
3. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **üì± –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Dashboard**
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è Web App —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π!

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
–¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç (runner/live.py)
    ‚Üì –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
data/dashboard_state.json
    ‚Üì —á–∏—Ç–∞–µ—Ç—Å—è
Flask API —Å–µ—Ä–≤–µ—Ä (webapp_server.py:8080)
    ‚Üì –æ—Ç–¥–∞–µ—Ç —á–µ—Ä–µ–∑ /api/dashboard
Telegram Web App (dashboard.html)
    ‚Üì –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ Telegram
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç real-time –¥–∞–Ω–Ω—ã–µ!
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **DashboardStateManager** (`utils/dashboard_state.py`) - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ JSON
2. **Flask API Server** (`webapp_server.py`) - HTTP —Å–µ—Ä–≤–µ—Ä —Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞
3. **Web App** (`telegram_webapp/dashboard.html`) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ —Å Chart.js
4. **ngrok** - –ü—Ä–æ–±—Ä–æ—Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (HTTPS)

---

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**

–í Telegram –±–æ—Ç–µ:

- `/menu` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ö–Ω–æ–ø–∫–∞ **üì± –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Dashboard** - –û—Ç–∫—Ä—ã—Ç—å Web App
- –ö–Ω–æ–ø–∫–∞ **üîÑ** –≤ Web App - –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ API endpoints**

- `GET /api/dashboard` - –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞
- `GET /api/positions` - –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `GET /api/health` - Health check

–ü—Ä–∏–º–µ—Ä:
```bash
curl http://localhost:8080/api/dashboard
```

---

## üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (–±–µ–∑ real-time –¥–∞–Ω–Ω—ã—Ö):

### **–í–∞—Ä–∏–∞–Ω—Ç A: GitHub Pages (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ mock –¥–∞–Ω–Ω—ã–µ)**

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ, –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ!

**–®–∞–≥ 1:** –ó–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª –Ω–∞ GitHub

```bash
git checkout -b gh-pages
copy telegram_webapp\dashboard.html index.html
git add index.html
git commit -m "Add Telegram Web App dashboard"
git push origin gh-pages
```

**–®–∞–≥ 2:** –í–∫–ª—é—á–∏ GitHub Pages

1. Settings ‚Üí Pages
2. Source: `gh-pages` branch
3. Save

**–®–∞–≥ 3:** –ü–æ–ª—É—á–∏ URL

URL: `https://<username>.github.io/<repo-name>/index.html`

---

### **–í–∞—Ä–∏–∞–Ω—Ç B: Netlify (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ mock –¥–∞–Ω–Ω—ã–µ)**

1. –°–æ–∑–¥–∞–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ Netlify.com
2. –ü–µ—Ä–µ—Ç–∞—â–∏ –ø–∞–ø–∫—É `telegram_webapp` –Ω–∞ Netlify
3. –ü–æ–ª—É—á–∏ URL: `https://your-app.netlify.app/dashboard.html`

---

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### **–ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

–í `.env`:
```bash
TG_DASHBOARD_INTERVAL=180  # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã
```

### **–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞**

–í `webapp_server.py`:
```python
if __name__ == '__main__':
    run_server(port=9000)  # –í–º–µ—Å—Ç–æ 8080
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç—å ngrok:
```bash
ngrok http 9000
```

### **–ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–∞**

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `telegram_webapp/dashboard.html`:

```css
.stat-card.positive .value {
    color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –ø—Ä–∏–±—ã–ª–∏ */
}

.stat-card.negative .value {
    color: #F44336; /* –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è —É–±—ã—Ç–∫–∞ */
}
```

### **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**

1. –í `utils/dashboard_state.py` –¥–æ–±–∞–≤—å –≤ `save_state()`:
```python
state = {
    'balance': ...,
    'myNewMetric': 123.45,  # –ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞
}
```

2. –í `telegram_webapp/dashboard.html` –æ—Ç–æ–±—Ä–∞–∑–∏:
```html
<div class="stat-card">
    <div class="label">üÜï My Metric</div>
    <div class="value">${data.myNewMetric}</div>
</div>
```

---

## üêõ Troubleshooting

### **Web App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è**

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω (–æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ):
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
   http://localhost:8080
   ```

2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ ngrok –∑–∞–ø—É—â–µ–Ω:
   ```bash
   curl https://your-ngrok-url.ngrok.io/api/health
   ```

3. URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **HTTPS** (–Ω–µ HTTP) –¥–ª—è Telegram

4. –ü—Ä–æ–≤–µ—Ä—å `.env`:
   ```bash
   TG_WEBAPP_URL=https://abc123.ngrok.io/
   ```

### **–î–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è**

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –∑–∞–ø—É—â–µ–Ω —Å —Ñ–ª–∞–≥–æ–º:
   ```bash
   # –í .env –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   TG_DASHBOARD_ENABLED=true
   ```

2. –ü—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è:
   ```bash
   # –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
   cat data/dashboard_state.json
   ```

3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞:
   ```
   üìä [WEB_APP] Dashboard state saved to file
   ```

4. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É üîÑ Refresh –≤ Web App

### **–û—à–∏–±–∫–∞: Flask not found**

```bash
pip install flask flask-cors
```

### **–ö–Ω–æ–ø–∫–∞ Web App –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –º–µ–Ω—é**

1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `TG_WEBAPP_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å `/menu` —Å–Ω–æ–≤–∞

### **ngrok URL –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ**

–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è ngrok –¥–∞–µ—Ç –Ω–æ–≤—ã–π URL –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

**–†–µ—à–µ–Ω–∏—è:**
- –ö—É–ø–∏—Ç—å ngrok Pro –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ URL
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Pages (–Ω–æ –±–µ–∑ real-time –¥–∞–Ω–Ω—ã—Ö)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `.env` —á–µ—Ä–µ–∑ ngrok API

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install flask flask-cors`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `webapp_server.py`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å ngrok
- [ ] –î–æ–±–∞–≤–∏—Ç—å ngrok URL –≤ `.env` –∫–∞–∫ `TG_WEBAPP_URL`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/menu` –∏ –Ω–∞–∂–∞—Ç—å **üì± –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Dashboard**

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π dashboard —Å real-time –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä—è–º–æ –≤ Telegram!**
